(self.webpackChunkweb=self.webpackChunkweb||[]).push([[94366],{25737:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>P});var s,o,a,n=i(67294),r=i(37974),c=i(94829),l=i(81419),d=i(54620),p=i(29208),u=i.n(p),h=i(61248),g=i(78554),m=i(4423),_=i(33487),S=i(72216);i(9179);function f(e,t,i,s){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,n=arguments.length-3;if(t||0===n||(t={children:void 0}),1===n)t.children=s;else if(n>1){for(var r=new Array(n),c=0;c<n;c++)r[c]=arguments[c+3];t.children=r}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:a,type:e,key:void 0===i?null:""+i,ref:null,props:t,_owner:null}}function b(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function T(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?b(Object(i),!0).forEach((function(t){y(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):b(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function y(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class v extends n.Component{constructor(e){super(e),this.loginEventRefresh=()=>{this.TopBandResetSessionStorage=!0,this.removeStorage(_.KQi.TopBand.SESSIONNAME,!0)},this.fireGA4=e=>{const t=T(T({},(0,c.l0)()||{}),{},{event:"select_item"});return(0,c.s0)(t,{item_name:window.location.href.indexOf(".cms")>-1?document.title:window.location.href,item_id:this.props.msid||"",item_brand:"product_interventions",item_category:"Nudges",item_category2:window.location.href.indexOf("liveblog")?"liveblog":"homepage",item_category3:null!=e&&e.item_category3?null==e?void 0:e.item_category3:"N/A",item_category4:null!=e&&e.item_category4?null==e?void 0:e.item_category4:"N/A",location_id:null!=e&&e.location_id?null==e?void 0:e.location_id:"N/A"})},this.checkMounting=()=>{const e=this.getPrcValue(),{componentName:t}=this.props;let i;if("TopBand"===t){const e=this.getStorage(_.KQi[t].SESSIONNAME,!0),s=this.checkComponentExpiryTime(_.KQi[t].DISMISS),o=this.checkComponentExpiryTime(_.KQi[t].CTACLICK);i=!e&&o&&s}else i=this.checkComponentExpiryTime(_.KQi[t]);i&&(e!==_.OT?this.end_date_timestamp||e===_.OT||this.getEndDate((e=>{this.setState({mounted:{[t]:!0},end_date:e})})):this.setState({mounted:{[t]:!0}}))},this.getEndDate=e=>{(0,h.fx)(this.props.userPrcData).then((t=>{const i=t.data.endDate||!1;this.end_date_timestamp=t.data.timestamp||!1,e(i)}))},this.updateCommonTranslationState=()=>{this.setState({commonNudgesTranslations:this.props.translationData})},this.getStorage=(e,t)=>(t?sessionStorage:localStorage).getItem(e),this.removeStorage=(e,t)=>(t?sessionStorage:localStorage).removeItem(e),this.checkComponentExpiryTime=e=>{if(!e)return!0;try{const t=(new Date).getTime(),i=this.getStorage(e);return!i||i&&t>i}catch(e){console.log(e)}return!0},this.showBlockerToFTU=e=>{const t=this.getActiveDaysLeft();return e===_.BGv&&t>0&&t<=this._const.SHOW_BLOCKER_TO_FTAU_DAYS_BEFORE},this.getActiveDaysLeft=()=>(this.end_date_timestamp-(new Date).getTime())/(this._const.HRS_IN_DAY*this._const.MINS_IN_HR*this._const.SEC_IN_MIN*this._const.MILLISEC_IN_SEC),this.redirectionToPlan=({item_category3:e})=>{const t=this.getPrcValue();var i,s;this.props.userData.isLoggedIn||d.ZP.get("ssoid")||d.ZP.get("ssoId")?(0,h.YY)(this.props.isWapView).then((i=>{var s;window.location.href=(0,S.Zo)((0,S.vQ)(T(T({},null===(s=this.props.translationData)||void 0===s?void 0:s.unifiedNodes[`prc${t}`]),{},{acqSubSource:e||"homepage_Inline_Nudge"}),i))})):window.location.href=(0,S.Zo)((0,S.vQ)(T(T({},null===(i=this.props.translationData)||void 0===i||null===(s=i.unifiedNodes)||void 0===s?void 0:s.notLoggedIn),{},{acqSubSource:"homepage_Inline_Nudge"})))},this.replaceTokens=e=>{const t={date:this.state.end_date,timesPoints:this.timesPoints};return"function"==typeof e?e(T({},t)):e},this.fireGA=(e,t,i)=>{const s={};e&&(s.gaAction=e,s.gaLabel=t||"",s.noSpaceReplace=!0,s.nonInteraction=i,(0,m.z)({data:s}))},this.learnmoreClickHandler=(e,t)=>{(0,g.d$)({formType:"learnMoreScreen",utmsFinal:t.utms}),this.fireGA(t.ga_action,t.ga_label)},this.setInLocalStorage=(e,t,i)=>{try{return(i?sessionStorage:localStorage).setItem(e,t),!0}catch(e){return!1}},this.toiPlusSubscriptionHandler=(e,t)=>{e.preventDefault(),"planScreen"===t&&this.redirectionToPlan()},this.ctaClickHandler=(e,t)=>{const{userData:i}=this.props;e.preventDefault();const s=this.getPrcValue();if(t&&"newPlanPage"===t.type){var o,a,n,r,c;const s=["paywall",{client_source:"cdp",event_nature:"click",event_category:"subscription",cta_text:t.cta_text||"Subscribe",position:4,unique_subscription_id:`${d.ZP.get("_grx")}_${(new Date).getTime()}`}];let l={};void 0!==window.grx&&"function"==typeof(null===(o=window)||void 0===o||null===(a=o.grx_module)||void 0===a?void 0:a.hitPaywallEventReact)?(window.grx_module.hitPaywallEventReact(...s),l=window.grx_module.getCdpInfo()||{}):window.Times.setGRXDataInLocalStorage("GRX_QUEUE_EVENT",{eventName:s[0],payload:s[1]});const p=s[1]||{},u={accessiblefeatures:null===(n=this.props.userPrcData)||void 0===n?void 0:n.accessibleFeatures,msid:this.props.msid,source:null===(r=this.props.userPrcData)||void 0===r?void 0:r.source,accessType:null===(c=this.props.userPrcData)||void 0===c?void 0:c.accessType,analytics_cdp:T(T({eventName:s[0]},p),l),objUserData:{email:void 0!==(null==i?void 0:i.getEmail)?i.getEmail():"",fname:void 0!==(null==i?void 0:i.getFirstName)?i.getFirstName():""},ga4Items:this.fireGA4({item_category4:e.target.innerText||"",item_category3:t.item_category3||"homepage_Inline_Nudge"})};(0,S.GK)(u).then((()=>this.redirectionToPlan({item_category3:t.item_category3})))}else switch(s){case _.OT:(0,g.d$)({formType:"paymentScreen",stop_redirection_for_subscribed:!0,utmsFinal:t.utms}),this.fireGA(t.ga_action,t.ga_label);break;case _.BGv:case _.dRz:case _.wAI:case _.uV$:(0,g.d$)({formType:"paymentScreen",utmsFinal:t.utms}),this.fireGA(t.ga_action,t.ga_label)}},this.getExpiryHoursAndCloseWidget=(e,t,i)=>{const s=this._const.MINS_IN_HR*this._const.SEC_IN_MIN*this._const.MILLISEC_IN_SEC,o=(new Date).getTime()+t*s,{componentName:a}=this.props;this.setInLocalStorage(e,o,i),this.unmountWidget(a)},this.unmountWidget=e=>{this.setState({mounted:{[e]:!1}})},this.clickHandler=(e,t,i=!1)=>{null!=t&&t.ga_action&&(0,h.Pi)(t.ga_action,"NON_STORY"),i&&(0,c.WU)(this.state.commonNudgesTranslations.currencyCode,"dimension38"),t&&t.nudgeType&&(0,c.WU)(t.nudgeType);const{componentName:s}=this.props;switch(t.type){case"TopBandBtnInView":this.TopBandResetSessionStorage||this.setInLocalStorage(_.KQi[s].SESSIONNAME,!0,!0);break;case"TopBandBtnClose":this.getExpiryHoursAndCloseWidget(_.KQi[s].DISMISS,this._const.TOPBAND_DISMISS_EXPIRY_HOURS),this.fireGA(t.ga_action,t.ga_label);break;case"ToastBtnClose":this.getExpiryHoursAndCloseWidget(_.KQi[s],this._const.TOAST_TIP_EXPIRY_HOURS);break;case"SubscribeNudgeClose":this.unmountWidget(s),this.fireGA(t.ga_action,t.ga_label);break;case"AddFreeSessionLoyalUserClose":this.unmountWidget(s),this.fireGA(t.ga_action,t.ga_label),window.location.reload(!0);break;case"learnmore":this.learnmoreClickHandler(e,t);break;case"firega":this.fireGA(t.ga_action,t.ga_label,t.nonInteraction);break;case"cta_topband":this.getExpiryHoursAndCloseWidget(_.KQi[s].CTACLICK,this._const.TOPBAND_CTA_EXPIRY_HOURS),this.ctaClickHandler(e,t);break;case"SubscribeNudge":(0,g.d$)({formType:"paymentScreen",utmsFinal:t.utms}),this.fireGA(t.ga_action,t.ga_label);break;case"AddFreeSessionLoyalUsers":(0,g.d$)({formType:"paymentScreen",stop_redirection_for_subscribed:!0,utmsFinal:t.utms}),this.fireGA(t.ga_action,t.ga_label);break;case"planPage":this.fireGA(t.ga_action,t.ga_label),this.ctaClickHandler(e,t);break;case"toiplusSubscriptionPayment":this.toiPlusSubscriptionHandler(e,"paymentScreen"),this.fireGA(t.ga_action,t.ga_label);break;case"toiplusSubscriptionPlan_topBand":this.getExpiryHoursAndCloseWidget(_.KQi[s].CTACLICK,this._const.TOPBAND_CTA_EXPIRY_HOURS),this.fireGA(t.ga_action,t.ga_label);break;case"fireGrx":this.fireSubscribeGrx(t.ga_action,t.ga_label);break;default:this.ctaClickHandler(e,t)}},this.getPrcValue=e=>{const{userData:t}=e||this.props;let i=0;return"undefined"!=typeof window&&window.location.href.indexOf("frmapp")>0&&(window.location.href.indexOf("pc=yes")>0||window.location.href.indexOf("pc2=yes")>0)&&(i=(0,h.Qw)(),0===i&&(i=_.nxK)),t&&t.prcValue?t.prcValue:i},this._const={HRS_IN_DAY:24,MINS_IN_HR:60,SEC_IN_MIN:60,MILLISEC_IN_SEC:1e3,SHOW_BLOCKER_TO_FTAU_DAYS_BEFORE:7,TOPBAND_CTA_EXPIRY_HOURS:72,TOPBAND_DISMISS_EXPIRY_HOURS:72,TOAST_TIP_EXPIRY_HOURS:24,prcStates:[_.dRz,_.BGv,_.wAI,_.uV$]},this.timesPoints=!1,this.state={LoadedComponent:!1,hasMounted:!1,mounted:{[e.componentName]:!1},commonNudgesTranslations:{}}}componentDidMount(){const{componentName:e}=this.props;var t;this.setState({hasMounted:!0}),this.state.LoadedComponent||this.setState({LoadedComponent:(t=e,n.lazy((()=>i(89422)(`./${t}/index`))))}),window.addEventListener("login_page_refresh",this.loginEventRefresh.bind(this)),this.checkMounting(),this.geoCountry=(0,h.Th)()}componentDidUpdate(e){(e.userData&&(e.userData.prcValue!==this.props.userData.prcValue||e.userPrcData!==this.props.userPrcData)||e.msid!==this.props.msid)&&this.checkMounting(),(void 0===this.state.commonNudgesTranslations||0===Object.keys(this.state.commonNudgesTranslations).length)&&this.props.translationData&&this.props.translationData.currencyCode&&this.updateCommonTranslationState()}renderSwitch(){const{LoadedComponent:e,commonNudgesTranslations:t}=this.state;if(!t||!t.currencyCode)return null;const i=this.getPrcValue(),{allActivity:s,theme:o,type:a,isWapView:r,componentName:c,msid:l,disableBlocker:d,force:p}=this.props,{defaultTimesPoints:u}=this.state.commonNudgesTranslations;let g;switch(this.timesPoints=(0,h.zs)(r,s,u),c){case"InlineWidget":(i===_.BGv&&this.showBlockerToFTU(i)||i!==_.BGv)&&(g={prc:i,replaceTokens:this.replaceTokens,clickHandler:this.clickHandler,points:this.timesPoints,theme:o,type:a,isWapView:r,fcap:this.props.fcap||!1,shortInlineWidgetTranslation:t&&t.inlineWidgetShort,longInlineWidgetTranslation:t&&t.inlineWidgetLong,useContentVisibilty:this.props.useContentVisibilty,isRHSWidgetAS:this.props.isRHSWidgetAS,userPrcData:this.props.userPrcData});break;case"Toast":g={prc:i,clickHandler:this.clickHandler,isWapView:r};break;case"TopBand":(i===_.BGv||p)&&(g={prc:i,clickHandler:this.clickHandler,replaceTokens:this.replaceTokens,isWapView:r,points:this.timesPoints,daysLeft:this.getActiveDaysLeft(),theme:o,force:p,topBandTranslation:t&&t.topBand});break;case"SubscribeNudge":g={prc:i,clickHandler:this.clickHandler,isWapView:r,points:this.timesPoints,isLogin:this.props.userData&&this.props.userData.isLoggedIn,getStorage:this.getStorage,setInLocalStorage:this.setInLocalStorage,msid:l,force:p,theme:o,disableBlocker:d,subscribeNudgeTranslation:t&&t.subscribeNudge};break;case"AddFreeSessionLoyalUsers":g={prc:this.props.userData&&this.props.userData.isLoggedIn?i:-1,clickHandler:this.clickHandler,isWapView:r,points:this.timesPoints,isLogin:this.props.userData&&this.props.userData.isLoggedIn,getStorage:this.getStorage,removeStorage:this.removeStorage,setInLocalStorage:this.setInLocalStorage,disableBlocker:d,theme:o,force:p};break;case"HPPrimeInlineWidget":g={prc:this.props.userData&&this.props.userData.isLoggedIn?i:-1,clickHandler:this.clickHandler,isWapView:r,hpPrimeInlineWidgetTranslation:t&&t.inlineWidgetNewHP,toiHpWidget:t&&t.TOIHPWidget,userPrcData:this.props.userPrcData};break;case"BottomToast":if(!this.props.showToiPlusCongratspopup)break;g={prc:this.props.userData&&this.props.userData.isLoggedIn?i:-1,getStorage:this.getStorage,removeStorage:this.removeStorage,setInLocalStorage:this.setInLocalStorage,userData:this.props.userData};break;case"ToiplusSubscribeInlineWidget":g={prcValue:this.props.userData&&this.props.userData.isLoggedIn?i:-1,clickHandler:this.clickHandler,isWapView:r,indiaHPTopNudge:t&&t.indiaHPTopNudge,currencyCode:t.currencyCode};break;default:return null}return g?n.createElement(e,g):null}render(){const{componentName:e}=this.props;return this.state.hasMounted?this.state.mounted[e]&&this.state.LoadedComponent||"InlineWidget"!==e?this.state.mounted[e]&&this.state.LoadedComponent&&(this.props.showToiPlusNudges||"BottomToast"===e||"TopBand"===e&&this.getPrcValue()===_.BGv||"HPPrimeInlineWidget"===e&&(this.getPrcValue()===_.BGv||this.getPrcValue()===_.nxK))?"HPPrimeInlineWidget"!==e&&"InlineWidget"!==e?null:f(l.Z,{},void 0,f(n.Suspense,{fallback:o||(o=f("div",{}))},void 0,this.renderSwitch())):null:s||(s=f("div",{className:"primeScreenWidgetWrapper CLSPlaceholder"})):null}}v.defaultProps={allActivity:[],isWapView:!1,theme:void 0,componentName:"InlineWidget",type:void 0,userData:{},msid:void 0,force:!1,disableBlocker:void 0,isPrime:!1,translationData:{},showToiPlusCongratspopup:!1,useContentVisibilty:!1,showToiPlusNudges:!1,isRHSWidgetAS:!1};const P=(0,r.$j)((e=>{var t,i;return{isPrime:e.isPrime,translationData:u()(e,"translationConfig.data",{}),userData:e.login&&e.login.userData?e.login.userData:{},allActivity:e.timespointmodal&&e.timespointmodal.allActivity,showToiPlusCongratspopup:void 0!==e.toiplusconfig&&(null===(t=e.toiplusconfig)||void 0===t?void 0:t.showToiPlusCongratspopup),showToiPlusNudges:void 0!==e.toiplusconfig&&(null===(i=e.toiplusconfig)||void 0===i?void 0:i.showToiPlusNudges),userPrcData:e.login.userPrcData}}),null)(v)},89422:(e,t,i)=>{var s={"./AddFreeSessionLoyalUsers/index":[59510,59510],"./BottomToast/index":[27058,27058],"./HPPrimeInlineWidget/index":[79612,79612],"./InlineWidget/index":[89383,89383],"./SubscribeNudge/index":[17106,17106],"./Toast/index":[29677,29677],"./ToiplusSubscribeInlineWidget/index":[39226,96486,39226],"./TopBand/index":[77785,77785]};function o(e){if(!i.o(s,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=s[e],o=t[0];return Promise.all(t.slice(1).map(i.e)).then((()=>i(o)))}o.keys=()=>Object.keys(s),o.id=89422,e.exports=o}}]);
//# sourceMappingURL=articleshowv2_desktop_nonprime_es6_module.9f9f5d9b.chunk.js.map